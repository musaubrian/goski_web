// Code generated by templ - DO NOT EDIT.

// templ: version: v0.2.771
package views

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import "github.com/a-h/templ"
import templruntime "github.com/a-h/templ/runtime"

func Index() templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var1 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var1 == nil {
			templ_7745c5c3_Var1 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Var2 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
			templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
			templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
			if !templ_7745c5c3_IsBuffer {
				defer func() {
					templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
					if templ_7745c5c3_Err == nil {
						templ_7745c5c3_Err = templ_7745c5c3_BufErr
					}
				}()
			}
			ctx = templ.InitializeContext(ctx)
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString("<div class=\"w-full flex flex-col justify-center items-center bg-slate-900 text-slate-100 tracking-tight\"><div class=\"text-center text-md w-full p-2 transition-all fixed top-0 left-0 z-50 w-full\" id=\"info-banner\"><!--errors, success information get chucked here--></div><form id=\"ascii-form\" class=\"flex flex-col justify-center items-center w-full h-screen text-lg font-light\" method=\"POST\" action=\"/to-ascii\" enctype=\"multipart/form-data\"><h1 class=\"text-4xl font-semibold mb-6 text-center text-wrap text-balance\">Image > ASCII Generator</h1><label id=\"upload-label\" for=\"file-upload\" class=\"cursor-pointer min-w-3/6 w-5/6 md:w-3/6 h-64 bg-slate-800 hover:bg-slate-700 transition-all border-2 border-slate-700 rounded-lg p-3 flex flex-col justify-center items-center\"><div id=\"upload-text\" class=\"font-light text-center flex flex-col items-center justify-center\"><svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"size-10 text-slate-300\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M12 16.5V9.75m0 0 3 3m-3-3-3 3M6.75 19.5a4.5 4.5 0 0 1-1.41-8.775 5.25 5.25 0 0 1 10.233-2.33 3 3 0 0 1 3.758 3.848A3.752 3.752 0 0 1 18 19.5H6.75Z\"></path></svg> Pick Image to convert</div><img id=\"uploaded-image\" class=\"hidden h-full w-full object-cover rounded-lg\" alt=\"Uploaded image preview\"> <input id=\"file-upload\" type=\"file\" accept=\"image/png,image/jpeg\" name=\"image\" class=\"hidden\"></label> <button type=\"submit\" class=\"mt-6 bg-slate-900 w-4/6 md:w-1/6  bg-slate-700 p-3 rounded hover:bg-slate-800 transition-all\">Convert</button></form><div class=\"flex flex-col justify-center items-center min-h-screen w-full mt-8 border-t border-slate-600 py-2\"><div id=\"ascii-image\" class=\"w-full h-full  bg-slate-900 text-center\"><pre id=\"ascii-output\" class=\"whitespace-pre font-mono text-[4.2px]\"></pre></div><button id=\"save-btn\" type=\"button\" onclick=\"saveAsImage()\" class=\" hidden mt-6 bg-blue-600 inline-flex items-center justify-center gap-2 mb-4 px-6 py-2 rounded hover:bg-blue-700 transition-all\"><svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"size-6\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3\"></path></svg> save creation</button></div></div><script>\n                        let imgName;\n                        function saveAsImage() {\n                                setLoading(\"Saving image...\")\n                                const asciiOutput = document.getElementById(\"ascii-image\")\n\n                                html2canvas(asciiOutput, {\n                                        backgroundColor: window.getComputedStyle(asciiOutput).backgroundColor,\n                                        scale: 4\n                                    }).then(canvas => {\n                                        const link = document.createElement('a')\n                                        link.href = canvas.toDataURL('image/png')\n                                        link.download = `${imgName}.ascii.png`\n                                        link.click()\n                                        setSuccess(\"Saved Successfully\")\n                                    }).catch(error => {\n                                        console.error('Error saving ASCII art as image:', error)\n                                        setError(\"Failed to save image. Please try again.\")\n                                    })\n                        }\n\n                        function showSaveBtn() {\n                                const saveBtn = document.getElementById(\"save-btn\")\n                                saveBtn.classList.remove(\"hidden\")\n                        }\n\n                        function setLoading(msg) {\n                                const infoBanner = document.getElementById(\"info-banner\")\n\n                                infoBanner.classList.remove(\"hidden\")\n                                infoBanner.classList.remove(\"bg-emerald-500\", \"bg-red-400\")\n                                infoBanner.classList.add(\"bg-sky-600\")\n                                infoBanner.innerHTML = msg\n                        }\n\n                        function setError(msg) {\n                                const infoBanner = document.getElementById(\"info-banner\")\n\n                                infoBanner.classList.remove(\"hidden\")\n                                infoBanner.classList.remove(\"bg-emerald-500\", \"bg-sky-600\")\n                                infoBanner.classList.add(\"bg-red-400\")\n                                infoBanner.innerHTML = msg\n                        }\n\n                        function setSuccess(msg) {\n                                const infoBanner = document.getElementById(\"info-banner\")\n\n                                infoBanner.classList.remove(\"hidden\")\n                                infoBanner.classList.remove(\"bg-red-400\")\n                                infoBanner.classList.add(\"bg-emerald-500\")\n                                infoBanner.innerHTML = msg\n                        }\n\n                        function resetBanner() {\n                                const infoBanner = document.getElementById(\"info-banner\")\n                                infoBanner.classList.add(\"hidden\")\n                        }\n\n                        function getViewportSize() {\n                            return {\n                                width: Math.round(window.innerWidth *0.8),\n                                height: Math.round(window.innerHeight*0.3)\n                            }\n                        }\n\n\n                        document.getElementById('file-upload').addEventListener('change', function(event) {\n                                const file = event.target.files[0];\n                                const uploadLabel = document.getElementById('upload-label');\n                                const uploadText = document.getElementById('upload-text');\n                                const uploadedImage = document.getElementById('uploaded-image');\n\n                                imgName = file.name.split(\".\")[0]\n\n                                if (file) {\n                                        resetBanner()\n                                        const reader = new FileReader();\n                                        reader.onload = function(e) {\n                                                uploadText.classList.add('hidden');\n                                                uploadedImage.src = e.target.result;\n                                                uploadedImage.classList.remove('hidden');\n                                                uploadLabel.classList.remove('bg-slate-50', 'border-2', 'hover:bg-slate-100');\n                                                uploadLabel.classList.add('p-0');\n                                        }\n                                        reader.readAsDataURL(file);\n                                }\n                        })\n\n                        document.getElementById('ascii-form').addEventListener('submit', async function(event) {\n                                event.preventDefault();\n                                setLoading(\"Uploading...\")\n\n                                const fileInput = document.getElementById('file-upload');\n\n                                if (!fileInput.files.length) {\n                                        setError(\"Nothing Picked to upload\")\n                                        return\n                                }\n\n                                const form = event.target;\n                                const formData = new FormData(form);\n                                let viewportSize = getViewportSize();\n\n                                formData.append('viewportWidth', viewportSize.width);\n                                formData.append('viewportHeight', viewportSize.height);\n\n\n                                try {\n                                        const response = await fetch(form.action, {\n                                                method: form.method,\n                                                body: formData,\n                                        });\n\n                                        const data = await response.json();\n                                        if (response.ok) {\n                                            if (data.ascii) {\n                                                document.getElementById('ascii-output').textContent = data.ascii;\n                                                setSuccess(\"Image converted\")\n                                                showSaveBtn()\n                                            }\n                                        } else if(data.error) {\n                                            setError(data.error)\n                                        }\n                                } catch (error) {\n                                    console.error('Error processing the request:', error);\n                                    setError(\"Something went wrong, don't worry its not your fault\")\n                                }\n                        })\n\n                        resetBanner()\n                </script>")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			return templ_7745c5c3_Err
		})
		templ_7745c5c3_Err = Base().Render(templ.WithChildren(ctx, templ_7745c5c3_Var2), templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return templ_7745c5c3_Err
	})
}

var _ = templruntime.GeneratedTemplate
